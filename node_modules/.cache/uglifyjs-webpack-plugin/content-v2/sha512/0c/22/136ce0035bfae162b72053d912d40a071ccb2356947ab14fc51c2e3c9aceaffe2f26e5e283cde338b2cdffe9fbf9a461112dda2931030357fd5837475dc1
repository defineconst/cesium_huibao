{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[62],{BLWF:function(e,t,a){e.exports={map:\"map___iJhGt\",toolbar:\"toolbar___5VAz3\",bar:\"bar___29Y16\",buttons:\"buttons___22yP5\"}},\"u+z7\":function(e,t,a){\"use strict\";a.r(t);a(\"OaEy\");var i,r,s,n=a(\"2fM7\"),o=a(\"q1tI\"),l=a.n(o),c=a(\"BLWF\"),h=a.n(c),u=(a(\"MT78\"),a(\"anUc\")),p=(a(\"W8A/\"),a(\"Xu5n\")),d=a(\"oscj\"),m=a(\"LvFn\"),g=a(\"Ojm/\"),y=a(\"QQWy\"),v=a(\"SAzV\"),b=a(\"JW8z\"),_=a(\"wyD7\"),f=a(\"nUcq\"),L=a(\"MuoO\"),w=(n[\"a\"].Option,n[\"a\"].OptGroup,i=Object(L[\"connect\"])(e=>{var t=e.Navigation,a=e.Login;return{Navigation:t,Login:a}}),i((s=class extends o[\"Component\"]{constructor(e){super(e),this.start=(()=>{this.initMap({}).then(()=>{})}),this.initMap=(()=>{var e=this.state,t=e.arcgisLayer,a=e.imagesLayer,i=e.digitalLayer;return t.set(\"id\",\"arcgisLayer\"),t.setVisible(!0),a.set(\"id\",\"imagesLayer\"),a.setVisible(!1),i.set(\"id\",\"digitalLayer\"),i.setVisible(!1),new Promise(e=>{var r=new _[\"a\"],s=new f[\"a\"]({units:\"metric\",target:\"scalebar\",className:\"ol-scale-line\"}),n=new p[\"a\"]({interactions:Object(g[\"a\"])().extend([new E]),view:new d[\"a\"]({center:Object(b[\"d\"])([114,30.5]),zoom:16}),layers:[t,a,i],target:\"map\"});n.addControl(r),n.addControl(s),this.setState({map:n})})}),this.landi=(()=>{for(var e=this.state,t=e.map,a=e.arcgisLayer,i=t.getLayers(),r=0;r<i.getLength();r++){var s=i.item(r).get(\"id\");\"imagesLayer\"!==s&&\"digitalLayer\"!==s||i.item(r).setVisible(!1)}a.setVisible(!0)}),this.weixing=(()=>{for(var e=this.state,t=e.map,a=e.imagesLayer,i=t.getLayers(),r=0;r<i.getLength();r++){var s=i.item(r).get(\"id\");\"arcgisLayer\"!==s&&\"digitalLayer\"!==s||i.item(r).setVisible(!1)}a.setVisible(!0)}),this.luwang=(()=>{for(var e=this.state,t=e.map,a=e.digitalLayer,i=t.getLayers(),r=0;r<i.getLength();r++){var s=i.item(r).get(\"id\");\"arcgisLayer\"!==s&&\"imagesLayer\"!==s||i.item(r).setVisible(!1)}a.setVisible(!0)}),this.hideModal=(()=>{this.setState({chartVisible:!1,sourceVisible:!1})}),this.state={map:null,chart:null,digitalLayer:new v[\"a\"]({source:new m[\"a\"]({url:\"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x={x}&y={y}&z={z}\"})}),imagesLayer:new v[\"a\"]({source:new m[\"a\"]({url:\"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=6&x={x}&y={y}&z={z}\"})}),arcgisLayer:new v[\"a\"]({source:new m[\"a\"]({url:\"http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}\"})}),ModalText:\"Content of the modal\",chartVisible:!1,sourceVisible:!1,confirmLoading:!1}}componentDidMount(){var e=this.props;e.dispatch,e.history,this.props.Login;this.start(),console.log(this.refs.chart),this.setState({chart:this.refs.chart})}render(){var e=this.state,t=e.map,a=e.chart,i=(e.chartVisible,e.sourceVisible);e.confirmLoading,e.ModalText;return l.a.createElement(\"div\",{style:{width:\"100%\",padding:\"100px 0 10px\"}},l.a.createElement(\"div\",{className:h.a.map,id:\"map\"},l.a.createElement(\"div\",{className:h.a.toolbar},l.a.createElement(\"div\",{className:h.a.bar,onClick:this.landi},l.a.createElement(\"p\",null,\"\\u6df1\\u84dd\")),l.a.createElement(\"div\",{className:h.a.bar,onClick:this.luwang},l.a.createElement(\"p\",null,\"\\u767e\\u5ea6\")),l.a.createElement(\"div\",{className:h.a.bar,onClick:this.weixing},l.a.createElement(\"p\",null,\"\\u536b\\u661f\")))),l.a.createElement(\"div\",{id:\"chart\",ref:\"chart\",style:{display:\"none\"}}),l.a.createElement(\"div\",{id:\"scalebar\",ref:\"scalebar\",style:{float:\"left\",position:\"absolute\",bottom:\"85px\"}}),t&&l.a.createElement(u[\"default\"],{parent:this,map:t,chart:a,visible:i}))}},r=s))||r),E=function(e){function t(){e.call(this,{handleDownEvent:x,handleDragEvent:V,handleMoveEvent:z,handleUpEvent:C}),this.coordinate_=null,this.cursor_=\"pointer\",this.feature_=null,this.previousCursor_=void 0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(y[\"b\"]);function x(e){var t=e.map,a=t.forEachFeatureAtPixel(e.pixel,function(e){return e});return a&&(this.coordinate_=e.coordinate,this.feature_=a),!!a}function V(e){var t=e.coordinate[0]-this.coordinate_[0],a=e.coordinate[1]-this.coordinate_[1],i=this.feature_.getGeometry();i.translate(t,a),this.coordinate_[0]=e.coordinate[0],this.coordinate_[1]=e.coordinate[1]}function z(e){if(this.cursor_){var t=e.map,a=t.forEachFeatureAtPixel(e.pixel,function(e){return e}),i=e.map.getTargetElement();a?i.style.cursor!=this.cursor_&&(this.previousCursor_=i.style.cursor,i.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(i.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}}function C(){return this.coordinate_=null,this.feature_=null,!1}t[\"default\"]=w}}]);","extractedComments":[]}