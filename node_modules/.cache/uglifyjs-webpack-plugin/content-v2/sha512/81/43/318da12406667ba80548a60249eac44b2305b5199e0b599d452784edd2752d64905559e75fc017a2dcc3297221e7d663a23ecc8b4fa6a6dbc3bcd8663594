{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[46],{r1ji:function(e,a,t){e.exports={box:\"box___agut5\",nav:\"nav___3hVNi\",titBox:\"titBox___3mPW7\",menu:\"menu___2H0EL\",active:\"active___2_lJf\",first:\"first___2Dj4S\",secondMenu:\"secondMenu___1DxTE\",secondMenuBg:\"secondMenuBg___3iGnr\",secondMenuItem:\"secondMenuItem___3pAi0\",personal:\"personal___S6f4h\"}},zlip:function(e,a,t){\"use strict\";t.r(a);t(\"5NDa\");var n,l,i,s=t(\"5rEg\"),o=(t(\"giR+\"),t(\"fyUT\")),r=(t(\"+L6B\"),t(\"2/Rp\")),c=(t(\"14J3\"),t(\"BMrR\")),m=(t(\"jCWc\"),t(\"kPKH\")),u=(t(\"sRBo\"),t(\"kaz8\")),h=(t(\"2qtc\"),t(\"kLXV\")),d=(t(\"miYZ\"),t(\"tsqr\")),p=(t(\"OaEy\"),t(\"2fM7\")),k=t(\"q1tI\"),y=t.n(k),g=t(\"55Ip\"),C=t(\"Ty5D\"),b=t(\"r1ji\"),E=t.n(b),_=t(\"MuoO\"),f=t(\"3uSS\"),x=(t(\"M7fd\"),t(\"7WSk\")),v=t(\"ejsE\"),S=t(\"+aIi\"),D=p[\"a\"].Option,w=(n=Object(_[\"connect\"])(e=>{var a=e.Login,t=e.HUIBAO;return{Login:a,HUIBAO:t}}),n((i=class extends k[\"Component\"]{constructor(){super(...arguments),this.state={firstMenu:\"\\u9996\\u9875\",secondMenu:\"\",scrollTop:0,dixingtu_visible:!1,yanmotu_visible:!1,qiukuaitu_visible:!1,playRoute_visible:!1,playDraw_visible:!1,qiukuaiFillColor:{r:232,g:188,b:39,a:0},qiukuaiStrokeColor:{r:255,g:255,b:255,a:1},qiukuaiStrokeWidth:1,qiukuaituDixing_checked:!1,yanmoFillColor:{r:30,g:144,b:255,a:.5},yanmoStrokeColor:{r:232,g:188,b:39,a:1},yanmoStrokeWidth:1,yanmotuDixing_checked:!0,playRoute_speed:3,playRoute_height:100,routeName:\"\",selectRouteId:\"\"},this.exist=(()=>{var e=this.props,a=e.dispatch,t=e.history;a({type:\"Login/exist\"}).then(()=>{t.push(\"/\")})}),this.handleDixingOk=(e=>{Pace.start(),console.log(e);var a=this.props.HUIBAO.dixingtu_checked;a?Object(x[\"_addDixingtu\"])().then(()=>{d[\"a\"].info(\"\\u5730\\u5f62\\u56fe\\u6dfb\\u52a0\\u6210\\u529f\\uff01\"),Pace.stop()}):Object(x[\"_removeDixingtu\"])().then(()=>{d[\"a\"].info(\"\\u5730\\u5f62\\u56fe\\u5df2\\u79fb\\u9664\\uff01\"),Pace.stop()}),this.setState({dixingtu_visible:!1})}),this.handleDixingCancel=(e=>{this.setState({dixingtu_visible:!1})}),this.handleYanmotuOk=(e=>{Pace.start();var a=this.state,t=a.yanmoFillColor,n=a.yanmoStrokeColor,l=a.yanmoStrokeWidth,i=(a.yanmotuDixing_checked,this.props.HUIBAO.yanmotu_checked);i?Object(x[\"_addYanmotuPolygon\"])({fillColor:t,strokeColor:n,strokeWidth:l,clampToGround:!0}).then(()=>{return Object(x[\"_addYanmotuLine\"])({fillColor:t,strokeColor:n,strokeWidth:l,clampToGround:!0})}).then(()=>{d[\"a\"].info(\"\\u6df9\\u6ca1\\u56fe\\u6dfb\\u52a0\\u6210\\u529f\\uff01\")}):Object(x[\"_removeYanmotu\"])().then(()=>{d[\"a\"].info(\"\\u6df9\\u6ca1\\u56fe\\u5df2\\u79fb\\u9664\\uff01\")}),this.setState({yanmotu_visible:!1},()=>{Pace.stop()})}),this.handleYanmoCancel=(e=>{this.setState({yanmotu_visible:!1})}),this.handleQiukuaiOk=(e=>{Pace.start();var a=this.state,t=a.qiukuaiFillColor,n=a.qiukuaiStrokeColor,l=a.qiukuaiStrokeWidth,i=(a.qiukuaituDixing_checked,this.props.HUIBAO),s=i.qiukuaitu_checked,o=i.zhujitu_checked;console.log(o),s?Object(x[\"_addQiukuaituPolygon\"])({fillColor:t,strokeColor:n,strokeWidth:l,clampToGround:!0}).then(()=>{return Object(x[\"_addQiukuaituLine\"])({fillColor:t,strokeColor:n,strokeWidth:l,clampToGround:!0})}).then(()=>{d[\"a\"].info(\"\\u4e18\\u5757\\u56fe\\u6dfb\\u52a0\\u6210\\u529f\\uff01\"),Pace.stop()}):Object(x[\"_removeQiukuaitu\"])().then(()=>{d[\"a\"].info(\"\\u4e18\\u5757\\u56fe\\u5df2\\u79fb\\u9664\\uff01\"),Pace.stop()}),o?Object(x[\"_addZhujitu\"])().then(()=>{d[\"a\"].info(\"\\u6ce8\\u8bb0\\u6dfb\\u52a0\\u6210\\u529f\\uff01\"),Pace.stop()}):Object(x[\"_removeZhujitu\"])().then(()=>{d[\"a\"].info(\"\\u6ce8\\u8bb0\\u5df2\\u79fb\\u9664\\uff01\"),Pace.stop()}),this.setState({qiukuaitu_visible:!1})}),this.handleQiukuaiCancel=(e=>{console.log(e),this.setState({qiukuaitu_visible:!1})}),this.onDixingChange=(e=>{console.log(\"checked = \".concat(e.target.checked)),this.props.dispatch({type:\"HUIBAO/setCommon\",payload:{dixingtu_checked:e.target.checked}})}),this.onQiukuaiChange=(e=>{this.props.dispatch({type:\"HUIBAO/setCommon\",payload:{qiukuaitu_checked:e.target.checked}})}),this.onZhujiChange=(e=>{this.props.dispatch({type:\"HUIBAO/setCommon\",payload:{zhujitu_checked:e.target.checked}})}),this.onYanmoChange=(e=>{this.props.dispatch({type:\"HUIBAO/setCommon\",payload:{yanmotu_checked:e.target.checked}})}),this.onQiukuaiDixingChange=(e=>{this.setState({qiukuaituDixing_checked:e.target.checked})}),this.setQiukuaiStrokeWidth=(e=>{this.setState({qiukuaiStrokeWidth:e})}),this.setQiukuaiStrokeColor=(e=>{this.setState({qiukuaiStrokeColor:e})}),this.setQiukuaiFillColor=(e=>{this.setState({qiukuaiFillColor:e})}),this.onYanmoDixingChange=(e=>{this.setState({yanmotuDixing_checked:e.target.checked})}),this.setYanmoStrokeWidth=(e=>{this.setState({yanmoStrokeWidth:e})}),this.setYanmoStrokeColor=(e=>{this.setState({yanmoStrokeColor:e})}),this.setYanmoFillColor=(e=>{this.setState({yanmoFillColor:e})}),this.handlePlayRouteOk=(e=>{var a=this.state,t=a.selectRouteId,n=a.playRoute_height,l=a.playRoute_speed,i=this.props.HUIBAO.flyDataArr;if(\"\"!==t.trim()){var s=i.filter(e=>e.id===t)[0];bxmap.FlyCesium.draw3DObj=s.geojson,bxmap.FlyCesium.showFly3DPathsBy(bxmap.FlyCesium.draw3DObj,n,l)}else h[\"a\"].warning({content:\"\\u98de\\u884c\\u8def\\u7ebf\\u4e0d\\u5b58\\u5728\\uff01\"})}),this.handlePlayRoutePause=(e=>{bxmap.FlyCesium.pauseFly3DPaths()}),this.handlePlayRouteGoon=(e=>{bxmap.FlyCesium.playForwardFly3DPaths()}),this.handlePlayRouteCancel=(e=>{this.setState({playRoute_visible:!1}),bxmap.FlyCesium.stopFly3DPaths()}),this.handlePlayDrawCancel=(e=>this.setState({playDraw_visible:!1})),this.onPlayRouteSpeedChange=(e=>this.setState({playRoute_speed:e})),this.onPlayRouteHeightChange=(e=>this.setState({playRoute_height:e})),this.drawRoute=(()=>{bxmap.FlyCesium.drawHelper||(bxmap.FlyCesium.drawHelper=new DrawHelper(window.viewer)),bxmap.FlyCesium.draw3DObj=bxmap.FlyCesium.DrawFly3DPaths(bxmap.FlyCesium.drawHelper),console.log(bxmap.FlyCesium.draw3DObj)}),this.onRouteNameInputChange=(e=>{console.log(e),this.setState({routeName:e.target.value})}),this.saveNew=(()=>{var e=this.props.dispatch,a=this.state.routeName;if(bxmap.FlyCesium.draw3DObj&&bxmap.FlyCesium.isDrawFly)if(\"\"===a.trim())h[\"a\"].warning({content:\"\\u8bf7\\u8f93\\u5165\\u8def\\u7ebf\\u540d\\u79f0\\uff01\"});else{var t=bxmap.FlyCesium.draw3DObj,n={id:Math.random().toString(36).substr(2),name:a,geojson:t};bxmap.FlyCesium.clearFly3DPaths(),e({type:\"HUIBAO/addFlyData\",payload:{flyData:n}}).then(()=>{d[\"a\"].info(\"\\u4fdd\\u5b58\\u6210\\u529f!\")})}else h[\"a\"].warning({content:\"\\u8bbe\\u5b9a\\u7684\\u6f2b\\u6e38\\u8def\\u7ebf\\u4e0d\\u5b58\\u5728\\uff0c\\u8bf7\\u7ed8\\u5236\\u518d\\u4fdd\\u5b58\"})}),this.handlePlayRouteChange=(e=>{this.setState({selectRouteId:e})}),this.removeRoute=(()=>{var e=this.props.dispatch,a=this.props.HUIBAO.flyDataArr,t=this.state.selectRouteId;\"\"===t.trim()?d[\"a\"].info(\"\\u65e0\\u8def\\u7ebf\\u9009\\u62e9\\uff01\"):h[\"a\"].confirm({title:\"\\u786e\\u8ba4\\u5220\\u9664\\uff1f\",okText:\"\\u786e\\u8ba4\",cancelText:\"\\u53d6\\u6d88\",onOk:()=>{e({type:\"HUIBAO/removeFlyData\",payload:{flyDataId:t}}).then(()=>{this.setState({selectRouteId:a.length>0?a[0].id:\"\"}),d[\"a\"].info(\"\\u4fdd\\u5b58\\u6210\\u529f!\")})}})}),this.removeNew=(()=>{bxmap.FlyCesium.clearFly3DPaths()})}componentDidMount(){this.props.history.listen(e=>{this.setState({firstMenu:e.pathname.split(\"/\")[1],secondMenu:e.pathname.split(\"/\")[2]}),document.body.scrollTop=0})}render(){var e=this.state,a=e.dixingtu_visible,t=e.yanmotu_visible,n=e.qiukuaitu_visible,l=e.qiukuaiStrokeWidth,i=e.qiukuaiFillColor,d=e.qiukuaiStrokeColor,C=(e.qiukuaituDixing_checked,e.yanmoStrokeWidth),b=e.yanmoFillColor,_=e.yanmoStrokeColor,x=(e.yanmotuDixing_checked,e.playDraw_visible),w=e.playRoute_visible,O=e.playRoute_speed,F=e.playRoute_height,R=e.selectRouteId,P=this.props.HUIBAO,T=P.dixingtu_checked,j=P.yanmotu_checked,I=P.qiukuaitu_checked,q=P.zhujitu_checked,B=P.drawHelper,H=P.flyDataArr,N=[{key:\"huibao_layer\",name:\"\\u56fe\\u5c42\",disabled:!1,children:[{key:\"hb_dixingtu\",name:\"\\u5730\\u5f62\\u56fe\",disabled:!1,callback:()=>{this.setState({dixingtu_visible:!0})}},{key:\"hb_yanmotu\",name:\"\\u6df9\\u6ca1\\u56fe\",disabled:!1,callback:()=>{this.setState({yanmotu_visible:!0})}},{key:\"hb_qiukuaitu\",name:\"\\u4e18\\u5757\\u56fe\",disabled:!1,callback:()=>{this.setState({qiukuaitu_visible:!0})}}]},{key:\"huibao_playRoute\",name:\"\\u653e\\u6620\",disabled:!1,children:[{key:\"playRoute\",name:\"\\u653e\\u6620\\u8def\\u7ebf\",disabled:!1,callback:()=>{this.setState({playRoute_visible:!0})}},{key:\"playDraw\",name:\"\\u653e\\u6620\\u7ed8\\u5236\",disabled:!1,callback:()=>{console.log(bxmap.FlyCesium),bxmap.FlyCesium.cesiumViewer||bxmap.FlyCesium.Init(window.viewer,B,\"box\"),this.setState({playDraw_visible:!0})}}]}];return y.a.createElement(y.a.Fragment,null,y.a.createElement(\"div\",{className:E.a.box},y.a.createElement(\"div\",{className:E.a.nav},y.a.createElement(\"div\",{className:E.a.titBox},y.a.createElement(\"p\",null,\"\\u6c47\\u62a5\\u7cfb\\u7edf\")),y.a.createElement(\"ul\",{className:E.a.menu},N.map((e,a)=>y.a.createElement(\"li\",{key:a,className:this.state.firstMenu===e.key?E.a.active:\"\"},y.a.createElement(g[\"Link\"],{className:E.a.first,disabled:e.disabled},e.name),e.children&&y.a.createElement(k[\"Fragment\"],null,y.a.createElement(\"div\",{className:E.a.secondMenuBg,style:{height:\"60px\"}}),y.a.createElement(\"div\",{className:E.a.secondMenu},e.children.map((e,a)=>y.a.createElement(\"div\",{className:E.a.secondMenuItem,key:a},e.callback&&y.a.createElement(\"a\",{onClick:e.callback},e.name),!e.callback&&y.a.createElement(g[\"Link\"],{className:this.state.secondMenu===e.key?E.a.active:\"\",disabled:e.disabled},e.name)))))))),y.a.createElement(\"div\",{className:E.a.personal},y.a.createElement(\"i\",null),y.a.createElement(\"p\",null,this.props.Login?this.props.Login.username:\"\"))),y.a.createElement(h[\"a\"],{title:\"\\u5730\\u5f62\\u56fe\\u5c42\\u5c5e\\u6027\",style:{marginLeft:10,marginTop:-10},visible:a,cancelText:\"\\u53d6\\u6d88\",okText:\"\\u786e\\u5b9a\",mask:!1,maskClosable:!1,onOk:this.handleDixingOk,onCancel:this.handleDixingCancel},y.a.createElement(\"p\",null,y.a.createElement(u[\"a\"],{onChange:this.onDixingChange,style:{paddingLeft:20},checked:T},\" \\u5730\\u5f62\\u56fe \"))),y.a.createElement(h[\"a\"],{title:\"\\u6df9\\u6ca1\\u56fe\\u5c42\\u5c5e\\u6027\",style:{marginLeft:10,marginTop:-10},bodyStyle:{height:230},visible:t,cancelText:\"\\u53d6\\u6d88\",okText:\"\\u786e\\u5b9a\",mask:!1,maskClosable:!1,onOk:this.handleYanmotuOk,onCancel:this.handleYanmoCancel},y.a.createElement(c[\"a\"],null,y.a.createElement(m[\"a\"],{offset:1,span:5},\"\\u6df9\\u6ca1\\u56fe\\uff1a\"),y.a.createElement(m[\"a\"],{span:2},y.a.createElement(u[\"a\"],{onChange:this.onYanmoChange,checked:j}))),y.a.createElement(c[\"a\"],{style:{marginTop:10}},y.a.createElement(m[\"a\"],{offset:1,span:5},y.a.createElement(\"span\",null,\"\\u586b\\u5145\\u989c\\u8272\\uff1a\")),y.a.createElement(m[\"a\"],{span:15},y.a.createElement(v[\"default\"],{onChange:this.setYanmoFillColor,defaultColor:b}))),y.a.createElement(c[\"a\"],{style:{marginTop:10}},y.a.createElement(m[\"a\"],{offset:1,span:5},y.a.createElement(\"span\",null,\"\\u8fb9\\u6846\\u989c\\u8272\\uff1a\")),y.a.createElement(m[\"a\"],{span:15},y.a.createElement(v[\"default\"],{onChange:this.setYanmoStrokeColor,defaultColor:_}))),y.a.createElement(c[\"a\"],{style:{marginTop:10}},y.a.createElement(m[\"a\"],{offset:1,span:5},y.a.createElement(\"span\",null,\"\\u8fb9\\u6846\\u5bbd\\u5ea6\\uff1a\")),y.a.createElement(m[\"a\"],{span:15},y.a.createElement(S[\"default\"],{min:0,max:10,step:1,onChange:this.setYanmoStrokeWidth,defaultValue:C})))),y.a.createElement(h[\"a\"],{title:\"\\u4e18\\u5757\\u56fe\\u5c42\\u5c5e\\u6027\",style:{marginLeft:10,marginTop:-10},bodyStyle:{height:230},visible:n,cancelText:\"\\u53d6\\u6d88\",okText:\"\\u786e\\u5b9a\",mask:!1,maskClosable:!1,onOk:this.handleQiukuaiOk,onCancel:this.handleQiukuaiCancel},y.a.createElement(c[\"a\"],null,y.a.createElement(m[\"a\"],{offset:1,span:5},\"\\u4e18\\u5757\\u56fe\\uff1a\"),y.a.createElement(m[\"a\"],{span:2},y.a.createElement(u[\"a\"],{onChange:this.onQiukuaiChange,checked:I}))),y.a.createElement(c[\"a\"],null,y.a.createElement(m[\"a\"],{offset:1,span:5},\"\\u6ce8 \\u8bb0\\uff1a\"),y.a.createElement(m[\"a\"],{span:2},y.a.createElement(u[\"a\"],{onChange:this.onZhujiChange,checked:q}))),y.a.createElement(c[\"a\"],{style:{marginTop:10}},y.a.createElement(m[\"a\"],{offset:1,span:5},y.a.createElement(\"span\",null,\"\\u586b\\u5145\\u989c\\u8272\\uff1a\")),y.a.createElement(m[\"a\"],{span:15},y.a.createElement(v[\"default\"],{onChange:this.setQiukuaiFillColor,defaultColor:i}))),y.a.createElement(c[\"a\"],{style:{marginTop:10}},y.a.createElement(m[\"a\"],{offset:1,span:5},y.a.createElement(\"span\",null,\"\\u8fb9\\u6846\\u989c\\u8272\\uff1a\")),y.a.createElement(m[\"a\"],{span:15},y.a.createElement(v[\"default\"],{onChange:this.setQiukuaiStrokeColor,defaultColor:d}))),y.a.createElement(c[\"a\"],{style:{marginTop:10}},y.a.createElement(m[\"a\"],{offset:1,span:5},y.a.createElement(\"span\",null,\"\\u8fb9\\u6846\\u5bbd\\u5ea6\\uff1a\")),y.a.createElement(m[\"a\"],{span:15},y.a.createElement(S[\"default\"],{min:0,max:10,step:1,onChange:this.setQiukuaiStrokeWidth,defaultValue:l})))),y.a.createElement(h[\"a\"],{title:\"\\u653e\\u6620\\u64ad\\u653e\\u5c5e\\u6027\",style:{marginLeft:10,marginTop:-10},bodyStyle:{height:230},visible:w,cancelText:\"\\u53d6\\u6d88\",okText:\"\\u786e\\u5b9a\",mask:!1,maskClosable:!1,footer:y.a.createElement(y.a.Fragment,null,y.a.createElement(r[\"a\"],{onClick:this.handlePlayRoutePause},\"\\u6682\\u505c\"),y.a.createElement(r[\"a\"],{onClick:this.handlePlayRouteGoon},\"\\u7ee7\\u7eed\"),y.a.createElement(r[\"a\"],{type:\"primary\",onClick:this.handlePlayRouteOk},\"\\u786e\\u5b9a\")),onCancel:this.handlePlayRouteCancel},y.a.createElement(c[\"a\"],null,y.a.createElement(m[\"a\"],{offset:1,span:5},\"\\u8def\\u7ebf\\u9009\\u62e9\\uff1a\"),y.a.createElement(m[\"a\"],{span:10},y.a.createElement(p[\"a\"],{value:R,style:{width:120},onChange:this.handlePlayRouteChange},H.map(e=>{return y.a.createElement(D,{key:e.id,value:e.id},e.name)})))),y.a.createElement(c[\"a\"],{style:{marginTop:10}},y.a.createElement(m[\"a\"],{offset:1,span:5},\"\\u8def\\u7ebf\\u9ad8\\u5ea6\\uff1a\"),y.a.createElement(m[\"a\"],{span:5},y.a.createElement(o[\"a\"],{min:0,max:5e3,defaultValue:F,step:50,onChange:this.onPlayRouteHeightChange})),y.a.createElement(m[\"a\"],{span:1},\"\\u7c73\")),y.a.createElement(c[\"a\"],{style:{marginTop:10}},y.a.createElement(m[\"a\"],{offset:1,span:5},y.a.createElement(\"span\",null,\"\\u653e\\u6620\\u901f\\u5ea6\\uff1a\")),y.a.createElement(m[\"a\"],{span:5},y.a.createElement(o[\"a\"],{min:1,max:50,defaultValue:O,step:1,onChange:this.onPlayRouteSpeedChange})),y.a.createElement(m[\"a\"],{span:1},\"\\u500d\"))),y.a.createElement(h[\"a\"],{title:\"\\u653e\\u6620\\u7ed8\\u5236\\u5c5e\\u6027\",className:E.a.playDraw,style:{marginLeft:10,marginTop:-10},bodyStyle:{height:200},visible:x,cancelText:\"\\u53d6\\u6d88\",okText:\"\\u786e\\u5b9a\",mask:!1,maskClosable:!1,footer:null,onCancel:this.handlePlayDrawCancel},y.a.createElement(c[\"a\"],null,y.a.createElement(m[\"a\"],{offset:1,span:5},\"\\u8def\\u7ebf\\u9009\\u62e9\\uff1a\"),y.a.createElement(m[\"a\"],{span:10},y.a.createElement(p[\"a\"],{value:R,style:{width:120},onChange:this.handlePlayRouteChange},H.map(e=>{return y.a.createElement(D,{key:e.id,value:e.id},e.name)}))),y.a.createElement(m[\"a\"],{span:8},y.a.createElement(r[\"a\"],{type:\"primary\",onClick:this.removeRoute},\"\\u5220\\u9664\"))),y.a.createElement(c[\"a\"],{style:{marginTop:10}},y.a.createElement(m[\"a\"],{offset:1,span:5},\"\\u8def\\u7ebf\\u540d\\u79f0\\uff1a\"),y.a.createElement(m[\"a\"],{span:15},y.a.createElement(s[\"a\"],{onChange:this.onRouteNameInputChange}))),y.a.createElement(c[\"a\"],null,y.a.createElement(m[\"a\"],{offset:3,span:18,style:{marginTop:10}},y.a.createElement(r[\"a\"],{onClick:this.drawRoute},\"\\u65b0\\u589e\\u8def\\u7ebf\"),y.a.createElement(r[\"a\"],{onClick:this.saveNew},\"\\u4fdd\\u5b58\\u65b0\\u589e\"),y.a.createElement(r[\"a\"],{onClick:this.removeNew},\"\\u53d6\\u6d88\\u65b0\\u589e\")))),y.a.createElement(\"div\",{id:\"box\",style:{display:\"none\"}})),y.a.createElement(f[\"default\"],null))}},l=i))||l);a[\"default\"]=Object(C[\"o\"])(w)}}]);","extractedComments":[]}