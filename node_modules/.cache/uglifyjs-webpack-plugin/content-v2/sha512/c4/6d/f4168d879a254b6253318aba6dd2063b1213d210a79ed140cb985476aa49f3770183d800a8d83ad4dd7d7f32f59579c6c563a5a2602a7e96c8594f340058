{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[66],{OmwI:function(e,t,a){\"use strict\";a.r(t);a(\"5Dmo\");var i=a(\"3S7+\"),s=(a(\"+L6B\"),a(\"2/Rp\")),r=(a(\"OaEy\"),a(\"2fM7\")),o=a(\"q1tI\"),n=a.n(o),l=a(\"TfWM\"),c=a.n(l),h=(a(\"MT78\"),a(\"6Qmp\")),u=a(\"/zsU\"),d=(a(\"W8A/\"),a(\"Xu5n\")),m=a(\"oscj\"),p=a(\"LvFn\"),g=a(\"Ojm/\"),y=a(\"QQWy\"),v=a(\"SAzV\"),f=a(\"Pmt0\"),b=a(\"WDFe\"),w=a(\"bHcU\"),_=a(\"hoJM\"),L=a(\"JW8z\"),C=a(\"wyD7\"),E=a(\"ouHB\"),M=a(\"Vf6A\");r[\"a\"].Option,r[\"a\"].OptGroup;class V extends o[\"Component\"]{constructor(e){super(e),this.start=(()=>{this.initMap({}).then(()=>{})}),this.initMap=(()=>{var e=this.state,t=e.wuhanGeojson,a=e.arcgisLayer,i=e.imagesLayer,s=e.digitalLayer;return a.set(\"id\",\"arcgisLayer\"),a.setVisible(!0),i.set(\"id\",\"imagesLayer\"),i.setVisible(!1),s.set(\"id\",\"digitalLayer\"),s.setVisible(!1),new Promise(e=>{var r=new C[\"a\"],o=new d[\"a\"]({interactions:Object(g[\"a\"])().extend([new S]),view:new m[\"a\"]({center:Object(L[\"d\"])([114,30.5]),zoom:16}),layers:[a,i,s,t],target:\"map\"});o.addControl(r),this.setState({map:o})})}),this.initCamera=(e=>{var t=this.state.obj;e.flyTo(t,{offset:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}})}),this.loadGeoJSON=(e=>{var t=this.state.viewer,a=Cesium.GeoJsonDataSource.load(e);a.then(e=>{t.dataSources.add(e),t.flyTo(e,{offset:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}}),this.setState({obj:e})})}),this.loadMapServer=(e=>{var t=this.state.viewer,a=t.imageryLayers.addImageryProvider(new Cesium.ArcGisMapServerImageryProvider({url:e}));t.flyTo(a,{offset:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}}),this.setState({obj:a})}),this.load3Dtiles=(e=>{var t=this.state.viewer,a=new Cesium.Cesium3DTileset({url:e});t&&a.readyPromise.then(e=>{t.scene.primitives.add(e),t.flyTo(e,{offset:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}}),this.setState({obj:e})}).otherwise(function(e){console.log(e)})}),this.loadGeoServer=((e,t)=>{var a=this.state.viewer;a&&a.imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider({url:e,layers:t}))}),this.anhei=(()=>{for(var e=this.state,t=e.map,a=e.arcgisLayer,i=t.getLayers(),s=0;s<i.getLength();s++){var r=i.item(s).get(\"id\");\"imagesLayer\"!==r&&\"digitalLayer\"!==r||i.item(s).setVisible(!1)}a.setVisible(!0)}),this.weixing=(()=>{for(var e=this.state,t=e.map,a=e.imagesLayer,i=t.getLayers(),s=0;s<i.getLength();s++){var r=i.item(s).get(\"id\");\"arcgisLayer\"!==r&&\"digitalLayer\"!==r||i.item(s).setVisible(!1)}a.setVisible(!0)}),this.luwang=(()=>{for(var e=this.state,t=e.map,a=e.digitalLayer,i=t.getLayers(),s=0;s<i.getLength();s++){var r=i.item(s).get(\"id\");\"arcgisLayer\"!==r&&\"imagesLayer\"!==r||i.item(s).setVisible(!1)}a.setVisible(!0)}),this.showModal=(e=>{switch(e){case\"chart\":this.setState({chartVisible:!0,sourceVisible:!1});break;case\"source\":this.setState({chartVisible:!1,sourceVisible:!0});break}}),this.hideModal=(()=>{this.setState({chartVisible:!1,sourceVisible:!1})}),this.state={map:null,chart:null,digitalLayer:new v[\"a\"]({source:new p[\"a\"]({url:\"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x={x}&y={y}&z={z}\"})}),imagesLayer:new v[\"a\"]({source:new p[\"a\"]({url:\"https://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=6&x={x}&y={y}&z={z}\"})}),arcgisLayer:new v[\"a\"]({source:new p[\"a\"]({url:\"http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}\"})}),wuhanGeojson:new f[\"a\"]({source:new b[\"a\"]({url:M,format:new E[\"a\"]}),style:new w[\"c\"]({stroke:new _[\"a\"]({color:\"#319FD3\",width:20})})}),ModalText:\"Content of the modal\",chartVisible:!1,sourceVisible:!1,confirmLoading:!1}}componentDidMount(){this.start(),console.log(this.refs.chart),this.setState({chart:this.refs.chart})}render(){var e=this.state,t=e.map,a=e.chart,r=e.chartVisible,o=e.sourceVisible;e.confirmLoading,e.ModalText;return n.a.createElement(\"div\",{style:{width:\"100%\",padding:\"100px 0 10px\"}},n.a.createElement(\"div\",{className:c.a.map,id:\"map\"},n.a.createElement(\"div\",{className:c.a.buttons},n.a.createElement(i[\"a\"],{placement:\"right\",title:\"\\u56fe\\u8868\\u5206\\u6790\",onClick:()=>this.showModal(\"chart\")},n.a.createElement(s[\"a\"],{type:\"dashed\",block:!0},n.a.createElement(\"span\",{className:\"icon iconfont icon-zhengcefagui\"}))),n.a.createElement(i[\"a\"],{placement:\"bottom\",title:\"\\u4eba\\u5458\\u5206\\u6790\",onClick:()=>this.showModal(\"source\")},n.a.createElement(s[\"a\"],{type:\"dashed\",block:!0},n.a.createElement(\"span\",{className:\"icon iconfont icon-lujingyunsuan\"})))),n.a.createElement(\"div\",{className:c.a.toolbar},n.a.createElement(\"div\",{className:c.a.bar,onClick:this.anhei},n.a.createElement(\"p\",null,\"\\u6697\\u9ed1\")),n.a.createElement(\"div\",{className:c.a.bar,onClick:this.luwang},n.a.createElement(\"p\",null,\"\\u8def\\u7f51\")),n.a.createElement(\"div\",{className:c.a.bar,onClick:this.weixing},n.a.createElement(\"p\",null,\"\\u536b\\u661f\")))),n.a.createElement(\"div\",{id:\"chart\",ref:\"chart\",style:{display:\"none\"}}),t&&n.a.createElement(h[\"default\"],{parent:this,map:t,chart:a,visible:r}),t&&n.a.createElement(u[\"default\"],{parent:this,map:t,chart:a,visible:o}))}}var S=function(e){function t(){e.call(this,{handleDownEvent:x,handleDragEvent:z,handleMoveEvent:j,handleUpEvent:k}),this.coordinate_=null,this.cursor_=\"pointer\",this.feature_=null,this.previousCursor_=void 0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(y[\"b\"]);function x(e){var t=e.map,a=t.forEachFeatureAtPixel(e.pixel,function(e){return e});return a&&(this.coordinate_=e.coordinate,this.feature_=a),!!a}function z(e){var t=e.coordinate[0]-this.coordinate_[0],a=e.coordinate[1]-this.coordinate_[1],i=this.feature_.getGeometry();i.translate(t,a),this.coordinate_[0]=e.coordinate[0],this.coordinate_[1]=e.coordinate[1]}function j(e){if(this.cursor_){var t=e.map,a=t.forEachFeatureAtPixel(e.pixel,function(e){return e}),i=e.map.getTargetElement();a?i.style.cursor!=this.cursor_&&(this.previousCursor_=i.style.cursor,i.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(i.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}}function k(){return this.coordinate_=null,this.feature_=null,!1}t[\"default\"]=V},TfWM:function(e,t,a){e.exports={map:\"map___2LSmn\",toolbar:\"toolbar___1HbJB\",bar:\"bar___3CyX6\",buttons:\"buttons___10hb-\"}},Vf6A:function(e,t,a){e.exports=a.p+\"static/wuhan.0ae1ea32.geojson\"}}]);","extractedComments":[]}